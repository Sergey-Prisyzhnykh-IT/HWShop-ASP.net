@page "/tent"
@using HW2OnlineShop
@using HWShop_ASP.net.Product
<h1>Палатка</h1>

@foreach (var p in products)
{
    if (p.Name == "Палатка")
    {
        <div>@p.Name</div>
        <img src="@p.urlImage" alt="Image" width="700" height="700"/>
        <div>@p.Price</div>
    }               
}

<div>
    <button @onclick="@AddToCart">
        +
    </button>
    <span class="count">
        @Count
    </span>
    <button @onclick="@RemoveFromCart">
        -
    </button>
        <button @onclick="@Buy">
        Купить
    </button>
</div>



@inject IProductCatalog ProductCatalog
@inject IBasket Basket


@inject IProductCatalog ProductCatalog

@code {
    IReadOnlyCollection<Product> products;

    [Parameter]
    public int Count { get; set; } = 0;
    
    protected override void OnInitialized()
    {

        products = ProductCatalog.GetProductCatalog();

    }

    private void AddToCart()
    {
        Count++;
    }

    private void RemoveFromCart()
    {
        if(Count != 0)
            Count--;
    }

    private void Buy()
    {
       Basket.Buy("Палатка", Count);

    }
}
